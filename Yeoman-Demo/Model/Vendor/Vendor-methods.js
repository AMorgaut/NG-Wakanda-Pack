model.Vendor.entityMethods.createDiscount = function(title, discount, description) {	var discount;		// create discount    try {        discount = require('discount').create(title, discount, description);    } catch (e) {        console.error('[vendor.createDiscount] Failed creating discount:', title, discount, description);        return e;    }	// broadcast discount	require('broadcast').send(this.clients, 'discount', discount);	// mail discount	this.clients.forEach(function (client) {	    client.sendMail(this.email, title, discount);	});};model.Vendor.entityMethods.createDiscount.scope = "public";