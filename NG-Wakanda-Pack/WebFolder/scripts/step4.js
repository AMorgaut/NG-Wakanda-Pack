var ds, country;angular.module('step4', ['wakConnectorModule']);function Controller($scope, wakConnectorService) {    // Create a proxy of the server model    wakConnectorService.init().then(function (datastore) {        ds = datastore;        // feed the angular scope with the stored data of the Country DataClass        $scope.countries = ds.Country.$find({});                Company = ds.Company;        // manage when a country is choosen        $scope.$watch('country', function fetchRelatedCompanies(newCountry) {            if (!newCountry) return;            // get companies related to current country                        // code working with version 0.0.1            ds.Company.$find({filter: 'country.ID = ' + country.ID}).then(function (event) {                $scope.companies = event.result;            });            // code expected to work with version 0.0.4            //$scope.companies = ds.Company.$find({filter: 'country.ID = ' + country.ID});            // code expected to work with final API            //country.companies.$fetch();        });    });}